[![Build Status](https://travis-ci.org/parity-contracts/secretstore-service.svg?branch=master)](https://travis-ci.org/parity-contracts/secretstore-service)
[![Coverage Status](https://coveralls.io/repos/github/parity-contracts/secretstore-service/badge.svg)](https://coveralls.io/github/parity-contracts/secretstore-service)

# secretstore-service
Secret Store service contracts.

## SecretStoreServerKeyGenerationService

### Deployments

| Chain | Address                                    | Owner                                                   | Registry name          | Key server set                          |
|-------|--------------------------------------------|---------------------------------------------------------|------------------------|-----------------------------------------|
| Kovan | [0x50D59af572FF790D665C339E60128C511c2656f0](https://kovan.etherscan.io/address/0x50D59af572FF790D665C339E60128C511c2656f0) | [0x00884912dA44286aFA12bf0E7ba26BB95DEb3CA6](https://kovan.etherscan.io/address/0x00884912dA44286aFA12bf0E7ba26BB95DEb3CA6) ([svyatonik](https://github.com/svyatonik))      | secretstore_service_srv_gen | [0x5694a840B7c8E24a28A350242C335252283f3D25](https://kovan.etherscan.io/address/0x5694a840B7c8E24a28A350242C335252283f3D25)

### ABI

```json
[{"constant":false,"inputs":[{"name":"_new","type":"address"}],"name":"setOwner","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"serverKeyId","type":"bytes32"}],"name":"deleteServerKeyGenerationRequest","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"maxServerKeyGenerationRequests","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"serverKeyGenerationRequestsCount","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"keyServer","type":"address"}],"name":"requireKeyServer","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"serverKeyGenerationFee","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"serverKeyId","type":"bytes32"}],"name":"serverKeyGenerationError","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"newFee","type":"uint256"}],"name":"setServerKeyGenerationFee","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"keyServersCount","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"index","type":"uint256"}],"name":"getServerKeyGenerationRequest","outputs":[{"name":"","type":"bytes32"},{"name":"","type":"address"},{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"owner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"drain","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"serverKeyId","type":"bytes32"},{"name":"threshold","type":"uint8"}],"name":"generateServerKey","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"constant":false,"inputs":[{"name":"newLimit","type":"uint256"}],"name":"setMaxServerKeyGenerationRequests","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"serverKeyId","type":"bytes32"},{"name":"serverKeyPublic","type":"bytes"}],"name":"serverKeyGenerated","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"serverKeyId","type":"bytes32"},{"name":"keyServer","type":"address"}],"name":"isServerKeyGenerationResponseRequired","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[{"name":"keyServerSetAddressInit","type":"address"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"payable":true,"stateMutability":"payable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":false,"name":"serverKeyId","type":"bytes32"},{"indexed":false,"name":"author","type":"address"},{"indexed":false,"name":"threshold","type":"uint8"}],"name":"ServerKeyGenerationRequested","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"serverKeyId","type":"bytes32"},{"indexed":false,"name":"serverKeyPublic","type":"bytes"}],"name":"ServerKeyGenerated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"serverKeyId","type":"bytes32"}],"name":"ServerKeyGenerationError","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"old","type":"address"},{"indexed":true,"name":"current","type":"address"}],"name":"NewOwner","type":"event"}]
```

### Bytecode

Compiler: `0.4.21+commit.dfe3193c.Emscripten.clang`

Enable optimization: `true`

```json
0x606060405260008054600160a060020a03191633600160a060020a0316179055341561002a57600080fd5b604051602080610ed28339810160405280805160018054600160a060020a031916600160a060020a039290921691909117905550506702c68af0bb1400006004908155600555610e538061007f6000396000f3006060604052600436106100cc5763ffffffff60e060020a60003504166313af403581146100d157806317dd3d88146100f257806318c296e814610108578063195a40f21461012d5780632b4f030a146101405780633eaf9b28146101755780633fbd7ecd14610188578063410021f31461019e5780635aa8404c146101b457806364124c86146101c75780638da5cb5b146102095780639890220b14610238578063b8020be51461024b578063e54dcfff1461025c578063ebbcc2e114610272578063ec6b036014610294575b600080fd5b34156100dc57600080fd5b6100f0600160a060020a03600435166102ca565b005b34156100fd57600080fd5b6100f0600435610350565b341561011357600080fd5b61011b6103b6565b60405190815260200160405180910390f35b341561013857600080fd5b61011b6103bc565b341561014b57600080fd5b61015f600160a060020a03600435166103c3565b60405160ff909116815260200160405180910390f35b341561018057600080fd5b61011b610432565b341561019357600080fd5b6100f0600435610438565b34156101a957600080fd5b6100f0600435610477565b34156101bf57600080fd5b61015f610497565b34156101d257600080fd5b6101dd6004356104f4565b604051928352600160a060020a0390911660208301526040808301919091526060909101905180910390f35b341561021457600080fd5b61021c610548565b604051600160a060020a03909116815260200160405180910390f35b341561024357600080fd5b6100f0610557565b6100f060043560ff602435166105c3565b341561026757600080fd5b6100f06004356106e0565b341561027d57600080fd5b6100f0600480359060248035908101910135610700565b341561029f57600080fd5b6102b6600435600160a060020a0360243516610872565b604051901515815260200160405180910390f35b60005433600160a060020a039081169116146102e557600080fd5b600054600160a060020a0380831691167f70aea8d848e8a90fb7661b227dc522eb6395c3dac71b63cb59edd5c9899b236460405160405180910390a36000805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b6000805433600160a060020a0390811691161461036c57600080fd5b50600081815260066020526040902061038582826108ab565b817fc79a8674b4a757f1b4372e9f51be17ee6d43b631ca0a97b477580f18fc76e1b860405160405180910390a25050565b60055481565b6007545b90565b600154600090600160a060020a031663287fb40c8360405160e060020a63ffffffff8416028152600160a060020a039091166004820152602401602060405180830381600087803b151561041657600080fd5b5af1151561042357600080fd5b50505060405180519392505050565b60045481565b6000610443336103c3565b505060008181526006602052604090208054600160a060020a0316151561046957610473565b61038582826108ab565b5050565b60005433600160a060020a0390811691161461049257600080fd5b600455565b600154600090600160a060020a0316635560c9656040518163ffffffff1660e060020a028152600401602060405180830381600087803b15156104d957600080fd5b5af115156104e657600080fd5b505050604051805191505090565b600080600080600060078681548110151561050b57fe5b6000918252602080832091909101548083526006909152604090912080546001909101549198600160a060020a0390911697509095509350505050565b600054600160a060020a031681565b600160a060020a03331660009081526002602052604090205480151561057c57600080fd5b600160a060020a0333166000818152600260205260408082209190915582156108fc0290839051600060405180830381858888f1935050505015156105c057600080fd5b50565b60006004548034101515156105d757600080fd5b6105df610497565b60ff168360010160ff16111515156105f657600080fd5b6005546007541061060657600080fd5b60008481526006602052604090208054909250600160a060020a03161561062c57600080fd5b610634610930565b815473ffffffffffffffffffffffffffffffffffffffff191633600160a060020a031617825560ff831660018084019190915560078054909181016106798382610dcb565b5060009182526020909120018490557f7e7d18cca7d509b32b27d10d4c0f1dfed4d779294388818f23941d13450dacb1843385604051928352600160a060020a03909116602083015260ff166040808301919091526060909101905180910390a150505050565b60005433600160a060020a039081169116146106fb57600080fd5b600555565b60008060008085858080601f016020809104026020016040519081016040528181529291906020840183838082843750859450505050505160401461074457600080fd5b60008881526006602052604090208054909550600160a060020a0316151561076b57610868565b610774336103c3565b9350868660405180838380828437820191505092505050604051809103902092506107ae856002018560016107a7610497565b0386610a89565b915060018260028111156107be57fe5b14156107c957610868565b6107d388866108ab565b60008260028111156107e157fe5b141561083a57877f20da9149b09a59e39dbfed5cfa1e68c9d9984736b0f73a0b1d9f7a063f093fc588886040516020808252810182905280604081018484808284378201915050935050505060405180910390a2610868565b877fc79a8674b4a757f1b4372e9f51be17ee6d43b631ca0a97b477580f18fc76e1b860405160405180910390a25b5050505050505050565b6000806000610880846103c3565b600086815260066020526040902090925090506108a06002820183610c31565b92505b505092915050565b6108b781600201610cb9565b60008281526006602081905260408220805473ffffffffffffffffffffffffffffffffffffffff1916815560018101839055600281018381556003820184905560048201805460ff1990811690915592820180549093169092559190816109216007850182610def565b50505050610473600783610d0a565b600080600080600080610941610497565b95503494508560ff168581151561095457fe5b049350600092505b6001860360ff168360ff1610156109ff57600154600160a060020a031663c66198dc8460405160e060020a63ffffffff841602815260ff9091166004820152602401602060405180830381600087803b15156109b757600080fd5b5af115156109c457600080fd5b5050506040518051600160a060020a0381166000908152600260205260409020805487019055958590039560019490940193925061095c9050565b600154600160a060020a031663c66198dc600019880160405160e060020a63ffffffff841602815260ff9091166004820152602401602060405180830381600087803b1515610a4d57600080fd5b5af11515610a5a57600080fd5b5050506040518051600160a060020a031660009081526002602052604090208054909601909555505050505050565b6001546000908190819081908190600160a060020a0316636452e8216040518163ffffffff1660e060020a028152600401602060405180830381600087803b1515610ad357600080fd5b5af11515610ae057600080fd5b505050604051805160028b015490955060ff1615159050610b0357838955610b15565b88548414610b1557610b158985610d93565b600189015460ff891660020a9350831615610b335760019450610c25565b600086815260038a016020526040902080546001808c0180548717905560028c01805460ff8181168401811660ff199283161790925584549382168301918216931683179093559193501415610ba75760058901805460018101610b978382610dcb565b5060009182526020909120018690555b600489015460ff90811690831610610be75760048901805460ff191660ff848116919091179091556000198301811690881611610be75760009450610c25565b600289015460ff16610bf7610497565b60048b0154919003915060001960ff91821683010181169088161115610c205760029450610c25565b600194505b50505050949350505050565b60015460009081908190600160a060020a0316636452e8216040518163ffffffff1660e060020a028152600401602060405180830381600087803b1515610c7757600080fd5b5af11515610c8457600080fd5b5050506040518051865490935083149050610ca257600192506108a3565b5050506001919091015460ff90911660020a161590565b60005b6005820154811015610473578160030160008360050183815481101515610cdf57fe5b600091825260208083209091015483528201929092526040019020805460ff19169055600101610cbc565b60005b8254811015610d8e5782548290849083908110610d2657fe5b6000918252602090912001541415610d8657825483906000198101908110610d4a57fe5b9060005260206000209001548382815481101515610d6457fe5b600091825260209091200155825460001901610d808482610dcb565b50610d8e565b600101610d0d565b505050565b610d9c82610cb9565b80825560006001830181905560028301805460ff199081169091556004840180549091169055610d8e60058401825b815481835581811511610d8e57600083815260209020610d8e918101908301610e09565b50805460008255906000526020600020908101906105c091905b6103c091905b80821115610e235760008155600101610e0f565b50905600a165627a7a72305820cf358bf662490e9f5eaefe7a67f091876baa3ba0571e15e5eac3fc9c1ea8850f0029
```

## SecretStoreServerKeyRetrievalService

### Deployments

| Chain | Address                                    | Owner                                                   | Registry name          | Key server set                          |
|-------|--------------------------------------------|---------------------------------------------------------|------------------------|-----------------------------------------|
| Kovan | [0xFfD57D9F9FD1A1e3eFf585d1F26DD33CFFAA6aad](https://kovan.etherscan.io/address/0xFfD57D9F9FD1A1e3eFf585d1F26DD33CFFAA6aad) | [0x00884912dA44286aFA12bf0E7ba26BB95DEb3CA6](https://kovan.etherscan.io/address/0x00884912dA44286aFA12bf0E7ba26BB95DEb3CA6) ([svyatonik](https://github.com/svyatonik))      | secretstore_service_srv_retr | [0x5694a840B7c8E24a28A350242C335252283f3D25](https://kovan.etherscan.io/address/0x5694a840B7c8E24a28A350242C335252283f3D25)

### ABI

```json
[{"constant":false,"inputs":[{"name":"_new","type":"address"}],"name":"setOwner","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"serverKeyId","type":"bytes32"}],"name":"serverKeyRetrievalError","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"serverKeyRetrievalRequestsCount","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"keyServer","type":"address"}],"name":"requireKeyServer","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"serverKeyId","type":"bytes32"},{"name":"keyServer","type":"address"}],"name":"isServerKeyRetrievalResponseRequired","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"index","type":"uint256"}],"name":"getServerKeyRetrievalRequest","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"keyServersCount","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"maxServerKeyRetrievalRequests","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"owner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"drain","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"newLimit","type":"uint256"}],"name":"setMaxServerKeyRetrievalRequests","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"serverKeyId","type":"bytes32"},{"name":"serverKeyPublic","type":"bytes"},{"name":"threshold","type":"uint8"}],"name":"serverKeyRetrieved","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"serverKeyRetrievalFee","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"newFee","type":"uint256"}],"name":"setServerKeyRetrievalFee","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"serverKeyId","type":"bytes32"}],"name":"deleteServerKeyRetrievalRequest","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"serverKeyId","type":"bytes32"}],"name":"retrieveServerKey","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"inputs":[{"name":"keyServerSetAddressInit","type":"address"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"payable":true,"stateMutability":"payable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":false,"name":"serverKeyId","type":"bytes32"}],"name":"ServerKeyRetrievalRequested","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"serverKeyId","type":"bytes32"},{"indexed":false,"name":"serverKeyPublic","type":"bytes"}],"name":"ServerKeyRetrieved","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"serverKeyId","type":"bytes32"}],"name":"ServerKeyRetrievalError","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"serverKeyId","type":"bytes32"},{"indexed":false,"name":"serverKeyPublic","type":"bytes"},{"indexed":false,"name":"threshold","type":"uint256"}],"name":"ServerKeyRetrieved","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"old","type":"address"},{"indexed":true,"name":"current","type":"address"}],"name":"NewOwner","type":"event"}]
```

### Bytecode

Compiler: `0.4.21+commit.dfe3193c.Emscripten.clang`

Enable optimization: `true`

```json
0x606060405260008054600160a060020a03191633600160a060020a0316179055341561002a57600080fd5b6040516020806112348339810160405280805160018054600160a060020a031916600160a060020a0392909216919091179055505067016345785d8a000060045560086005556111b58061007f6000396000f3006060604052600436106100cc5763ffffffff60e060020a60003504166313af403581146100d157806315eb5309146100f25780631b544bb0146101085780632b4f030a1461012d5780633b68c4271461016257806350f6a134146101985780635aa8404c146101ae5780636479c4d1146101c15780638da5cb5b146101d45780639890220b146102035780639f0d6ffd14610216578063a45362f61461022c578063af538b7114610254578063d2548ea814610267578063e70f14271461027d578063ffaff0f714610293575b600080fd5b34156100dc57600080fd5b6100f0600160a060020a036004351661029e565b005b34156100fd57600080fd5b6100f0600435610324565b341561011357600080fd5b61011b6103e8565b60405190815260200160405180910390f35b341561013857600080fd5b61014c600160a060020a03600435166103ef565b60405160ff909116815260200160405180910390f35b341561016d57600080fd5b610184600435600160a060020a036024351661045e565b604051901515815260200160405180910390f35b34156101a357600080fd5b61011b600435610497565b34156101b957600080fd5b61014c6104bc565b34156101cc57600080fd5b61011b610519565b34156101df57600080fd5b6101e761051f565b604051600160a060020a03909116815260200160405180910390f35b341561020e57600080fd5b6100f061052e565b341561022157600080fd5b6100f060043561059a565b341561023757600080fd5b6100f060048035906024803590810191013560ff604435166105ba565b341561025f57600080fd5b61011b610780565b341561027257600080fd5b6100f0600435610786565b341561028857600080fd5b6100f06004356107a6565b6100f060043561080c565b60005433600160a060020a039081169116146102b957600080fd5b600054600160a060020a0380831691167f70aea8d848e8a90fb7661b227dc522eb6395c3dac71b63cb59edd5c9899b236460405160405180910390a36000805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b60008061032f61105d565b6000848152600660205260408120805490945060ff161515610350576103e1565b610359336103ef565b9250604080518059106103695750595b818152601f19601f83011681016020016040529050915061038d84848460ff6108be565b509050600181600281111561039e57fe5b14156103a9576103e1565b6103b38585610b07565b847fd771fa1d962d6d67f55ba82bcac8601cf0bd33cc5680a029b58faa3d2d3d260d60405160405180910390a25b5050505050565b6007545b90565b600154600090600160a060020a031663287fb40c8360405160e060020a63ffffffff8416028152600160a060020a039091166004820152602401602060405180830381600087803b151561044257600080fd5b5af1151561044f57600080fd5b50505060405180519392505050565b600080600061046c846103ef565b6000868152600660205260409020909250905061048c6001820183610bbe565b92505b505092915050565b6000806007838154811015156104a957fe5b6000918252602090912001549392505050565b600154600090600160a060020a0316635560c9656040518163ffffffff1660e060020a028152600401602060405180830381600087803b15156104fe57600080fd5b5af1151561050b57600080fd5b505050604051805191505090565b60055481565b600054600160a060020a031681565b600160a060020a03331660009081526002602052604090205480151561055357600080fd5b600160a060020a0333166000818152600260205260408082209190915582156108fc0290839051600060405180830381858888f19350505050151561059757600080fd5b50565b60005433600160a060020a039081169116146105b557600080fd5b600555565b60008060006105c761105d565b86868080601f016020809104026020016040519081016040528181529291906020840183838082843750859450505050505160401461060557600080fd5b6000898152600660205260409020805490955060ff16151561062657610775565b61062f336103ef565b935061066d85858a8a8080601f0160208091040260200160405190810160405281815292919060208401838380828437508e94506108be9350505050565b9093509150600183600281111561068057fe5b141561068b57610775565b6106958986610b07565b60008360028111156106a357fe5b141561074757887fbc454e03c5f94d0bd23c53b4fed1f5af23e7cd378eac46203f25d406c4a921188360405160208082528190810183818151815260200191508051906020019080838360005b838110156107085780820151838201526020016106f0565b50505050905090810190601f1680156107355780820380516001836020036101000a031916815260200191505b509250505060405180910390a2610775565b887fd771fa1d962d6d67f55ba82bcac8601cf0bd33cc5680a029b58faa3d2d3d260d60405160405180910390a25b505050505050505050565b60045481565b60005433600160a060020a039081169116146107a157600080fd5b600455565b6000805433600160a060020a039081169116146107c257600080fd5b5060008181526006602052604090206107db8282610b07565b817fd771fa1d962d6d67f55ba82bcac8601cf0bd33cc5680a029b58faa3d2d3d260d60405160405180910390a25050565b600060045480341015151561082057600080fd5b6005546007541061083057600080fd5b6000838152600660205260409020805490925060ff161561085057600080fd5b610858610c46565b815460ff1916600190811783556007805490918101610877838261106f565b5060009182526020909120018390557fabca19cd1a35cd8001bfc77e38ae9f56a162e022292a67e1152f1512776d68088360405190815260200160405180910390a1505050565b60006108c861105d565b60ff8316600080806108f560018b018a60026108e26104bc565b60ff168115156108ee57fe5b0487610d9f565b9250600283600281111561090557fe5b141561091657828895509550610afa565b87876040518083805190602001908083835b602083106109475780518252601f199092019160209182019101610928565b6001836020036101000a0380198251168184511680821785525050505050509050018260ff1660ff167f010000000000000000000000000000000000000000000000000000000000000002815260010192505050604051809103902091506109b48a6007018a8985610d9f565b905060018360028111156109c457fe5b1415610a20578660ff1660ff141580156109f857506000828152600a8b016020526040902054600b8b015460ff9081169116145b15610a1457600d8a01888051610a12929160200190611093565b505b60018895509550610afa565b6001816002811115610a2e57fe5b1415610af357600b8a015460ff600189018116911610610af35760008a600d01808054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610ae35780601f10610ab857610100808354040283529160200191610ae3565b820191906000526020600020905b815481529060010190602001808311610ac657829003601f168201915b5050505050905095509550610afa565b8088955095505b5050505094509492505050565b610b1381600701610f47565b60008281526006602081905260408220805460ff1990811682556001820184815560028301859055600383018054831690556005830180549092169091559092918290610b6290850182611111565b50506000600783018181556008840182905560098401805460ff19908116909155600b85018054909116905590610b9c600c850182611111565b50610bad9050600d8301600061112f565b5050610bba600783610f98565b5050565b60015460009081908190600160a060020a0316636452e8216040518163ffffffff1660e060020a028152600401602060405180830381600087803b1515610c0457600080fd5b5af11515610c1157600080fd5b5050506040518051865490935083149050610c2f576001925061048f565b5050506001919091015460ff90911660020a161590565b600080600080600080610c576104bc565b95503494508560ff1685811515610c6a57fe5b049350600092505b6001860360ff168360ff161015610d1557600154600160a060020a031663c66198dc8460405160e060020a63ffffffff841602815260ff9091166004820152602401602060405180830381600087803b1515610ccd57600080fd5b5af11515610cda57600080fd5b5050506040518051600160a060020a03811660009081526002602052604090208054870190559585900395600194909401939250610c729050565b600154600160a060020a031663c66198dc600019880160405160e060020a63ffffffff841602815260ff9091166004820152602401602060405180830381600087803b1515610d6357600080fd5b5af11515610d7057600080fd5b5050506040518051600160a060020a031660009081526002602052604090208054909601909555505050505050565b6001546000908190819081908190600160a060020a0316636452e8216040518163ffffffff1660e060020a028152600401602060405180830381600087803b1515610de957600080fd5b5af11515610df657600080fd5b505050604051805160028b015490955060ff1615159050610e1957838955610e2b565b88548414610e2b57610e2b8985611021565b600189015460ff891660020a9350831615610e495760019450610f3b565b600086815260038a016020526040902080546001808c0180548717905560028c01805460ff8181168401811660ff199283161790925584549382168301918216931683179093559193501415610ebd5760058901805460018101610ead838261106f565b5060009182526020909120018690555b600489015460ff90811690831610610efd5760048901805460ff191660ff848116919091179091556000198301811690881611610efd5760009450610f3b565b600289015460ff16610f0d6104bc565b60048b0154919003915060001960ff91821683010181169088161115610f365760029450610f3b565b600194505b50505050949350505050565b60005b6005820154811015610bba578160030160008360050183815481101515610f6d57fe5b600091825260208083209091015483528201929092526040019020805460ff19169055600101610f4a565b60005b825481101561101c5782548290849083908110610fb457fe5b600091825260209091200154141561101457825483906000198101908110610fd857fe5b9060005260206000209001548382815481101515610ff257fe5b60009182526020909120015582546000190161100e848261106f565b5061101c565b600101610f9b565b505050565b61102a82610f47565b80825560006001830181905560028301805460ff19908116909155600484018054909116905561101c600584018261106f565b60206040519081016040526000815290565b81548183558181151161101c5760008381526020902061101c91810190830161116f565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106110d457805160ff1916838001178555611101565b82800160010185558215611101579182015b828111156111015782518255916020019190600101906110e6565b5061110d92915061116f565b5090565b5080546000825590600052602060002090810190610597919061116f565b50805460018160011615610100020316600290046000825580601f106111555750610597565b601f01602090049060005260206000209081019061059791905b6103ec91905b8082111561110d57600081556001016111755600a165627a7a7230582093b4302e6a67abd6c447dc2d4c4cd07d1d1f1f3ec704d249070130cadcc6795a0029
```

## SecretStoreDocumentKeyStoreService

### Deployments

| Chain | Address                                    | Owner                                                   | Registry name          | Key server set                          |
|-------|--------------------------------------------|---------------------------------------------------------|------------------------|-----------------------------------------|
| Kovan | [0x9c32cdcbB0dC4fDEB1f72CF823e59835d77fc5Ee](https://kovan.etherscan.io/address/0x9c32cdcbB0dC4fDEB1f72CF823e59835d77fc5Ee) | [0x00884912dA44286aFA12bf0E7ba26BB95DEb3CA6](https://kovan.etherscan.io/address/0x00884912dA44286aFA12bf0E7ba26BB95DEb3CA6) ([svyatonik](https://github.com/svyatonik))      | secretstore_service_doc_store | [0x5694a840B7c8E24a28A350242C335252283f3D25](https://kovan.etherscan.io/address/0x5694a840B7c8E24a28A350242C335252283f3D25)

### ABI

```json
[{"constant":false,"inputs":[{"name":"serverKeyId","type":"bytes32"},{"name":"commonPoint","type":"bytes"},{"name":"encryptedPoint","type":"bytes"}],"name":"storeDocumentKey","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"constant":false,"inputs":[{"name":"_new","type":"address"}],"name":"setOwner","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"keyServer","type":"address"}],"name":"requireKeyServer","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"maxDocumentKeyStoreRequests","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"keyServersCount","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"documentKeyStoreRequestsCount","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"serverKeyId","type":"bytes32"}],"name":"documentKeyStoreError","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"serverKeyId","type":"bytes32"}],"name":"documentKeyStored","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"newFee","type":"uint256"}],"name":"setDocumentKeyStoreFee","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"serverKeyId","type":"bytes32"},{"name":"keyServer","type":"address"}],"name":"isDocumentKeyStoreResponseRequired","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"owner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"drain","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"documentKeyStoreFee","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"serverKeyId","type":"bytes32"}],"name":"deleteDocumentKeyStoreRequest","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"newLimit","type":"uint256"}],"name":"setMaxDocumentKeyStoreRequests","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"index","type":"uint256"}],"name":"getDocumentKeyStoreRequest","outputs":[{"name":"","type":"bytes32"},{"name":"","type":"address"},{"name":"","type":"bytes"},{"name":"","type":"bytes"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[{"name":"keyServerSetAddressInit","type":"address"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"payable":true,"stateMutability":"payable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":false,"name":"serverKeyId","type":"bytes32"},{"indexed":false,"name":"author","type":"address"},{"indexed":false,"name":"commonPoint","type":"bytes"},{"indexed":false,"name":"encryptedPoint","type":"bytes"}],"name":"DocumentKeyStoreRequested","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"serverKeyId","type":"bytes32"}],"name":"DocumentKeyStored","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"serverKeyId","type":"bytes32"}],"name":"DocumentKeyStoreError","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"old","type":"address"},{"indexed":true,"name":"current","type":"address"}],"name":"NewOwner","type":"event"}]
```

### Bytecode

Compiler: `0.4.21+commit.dfe3193c.Emscripten.clang`

Enable optimization: `true`

```json
0x606060405260008054600160a060020a03191633600160a060020a0316179055341561002a57600080fd5b6040516020806111be8339810160405280805160018054600160a060020a031916600160a060020a0392909216919091179055505067016345785d8a0000600455600860055561113f8061007f6000396000f3006060604052600436106100cc5763ffffffff60e060020a6000350416630fe7db4a81146100d157806313af4035146100f65780632b4f030a146101155780634bcdff5e1461014a5780635aa8404c1461016f578063663c87cd1461018257806387f76b1a146101955780638a9a9a0f146101ab5780638b974967146101c15780638ba9e398146101d75780638da5cb5b1461020d5780639890220b1461023c578063a020846a1461024f578063c0332ca114610262578063d413995b14610278578063fb2f439b1461028e575b600080fd5b6100f460048035906024803580820192908101359160443590810191013561039c565b005b341561010157600080fd5b6100f4600160a060020a0360043516610560565b341561012057600080fd5b610134600160a060020a03600435166105e6565b60405160ff909116815260200160405180910390f35b341561015557600080fd5b61015d610655565b60405190815260200160405180910390f35b341561017a57600080fd5b61013461065b565b341561018d57600080fd5b61015d6106b9565b34156101a057600080fd5b6100f46004356106bf565b34156101b657600080fd5b6100f4600435610729565b34156101cc57600080fd5b6100f46004356107d6565b34156101e257600080fd5b6101f9600435600160a060020a03602435166107f6565b604051901515815260200160405180910390f35b341561021857600080fd5b61022061082f565b604051600160a060020a03909116815260200160405180910390f35b341561024757600080fd5b6100f461083e565b341561025a57600080fd5b61015d6108aa565b341561026d57600080fd5b6100f46004356108b0565b341561028357600080fd5b6100f46004356108e5565b341561029957600080fd5b6102a4600435610905565b604051848152600160a060020a0384166020820152608060408201818152906060830190830185818151815260200191508051906020019080838360005b838110156102fa5780820151838201526020016102e2565b50505050905090810190601f1680156103275780820380516001836020036101000a031916815260200191505b50838103825284818151815260200191508051906020019080838360005b8381101561035d578082015183820152602001610345565b50505050905090810190601f16801561038a5780820380516001836020036101000a031916815260200191505b50965050505050505060405180910390f35b60006004548034101515156103b057600080fd5b85858080601f01602080910402602001604051908101604052818152929190602084018383808284375085945050505050516040146103ee57600080fd5b84848080601f016020809104026020016040519081016040528181529291906020840183838082843750859450505050505160401461042c57600080fd5b6005546007541061043c57600080fd5b60008981526006602052604090208054909450600160a060020a03161561046257600080fd5b61046a610ab0565b835473ffffffffffffffffffffffffffffffffffffffff191633600160a060020a031617845561049e600185018989610fe7565b506104ad600285018787610fe7565b5060078054600181016104c08382611065565b5060009182526020909120018990557fadc87e5ceadda3a573403a1ad2d7e815d4482b89ea2034e49d188de6843ee43d89338a8a8a8a604051868152600160a060020a03861660208201526080604082018181529082018590526060820160a083018787808284379091018481038352858152602001905085858082843782019150509850505050505050505060405180910390a1505050505050505050565b60005433600160a060020a0390811691161461057b57600080fd5b600054600160a060020a0380831691167f70aea8d848e8a90fb7661b227dc522eb6395c3dac71b63cb59edd5c9899b236460405160405180910390a36000805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b600154600090600160a060020a031663287fb40c8360405160e060020a63ffffffff8416028152600160a060020a039091166004820152602401602060405180830381600087803b151561063957600080fd5b5af1151561064657600080fd5b50505060405180519392505050565b60055481565b600154600090600160a060020a0316635560c9656040518163ffffffff1660e060020a028152600401602060405180830381600087803b151561069d57600080fd5b5af115156106aa57600080fd5b50505060405180519150505b90565b60075490565b60008181526006602052604090208054600160a060020a031615156106e357610725565b6106ec336105e6565b506106f78282610c09565b817f1accba7cc95d8cf1f4f927b53957972a0d92aa6f96636f1fd988dad93d263e9760405160405180910390a25b5050565b6000818152600660205260408120805490919081908190600160a060020a03161515610754576107cf565b61075d336105e6565b92506000915061077c6003850184600161077561065b565b0385610ca1565b9050600181600281111561078c57fe5b1415610797576107cf565b6107a18585610c09565b847ff97081917a769be6d07eefdd63666c32b011f9dba0bb0eed6cf1b9c9b987461c60405160405180910390a25b5050505050565b60005433600160a060020a039081169116146107f157600080fd5b600455565b6000806000610804846105e6565b600086815260066020526040902090925090506108246003820183610e49565b92505b505092915050565b600054600160a060020a031681565b600160a060020a03331660009081526002602052604090205480151561086357600080fd5b600160a060020a0333166000818152600260205260408082209190915582156108fc0290839051600060405180830381858888f1935050505015156108a757600080fd5b50565b60045481565b6000805433600160a060020a039081169116146108cc57600080fd5b5060008181526006602052604090206106f78282610c09565b60005433600160a060020a0390811691161461090057600080fd5b600555565b600080610910611089565b610918611089565b60008060078781548110151561092a57fe5b6000918252602080832090910154808352600682526040928390208054600180830180549498509296508795600160a060020a0390921694929360028089019486949383161561010002600019019092160491601f83018290048202909101905190810160405280929190818152602001828054600181600116156101000203166002900480156109fc5780601f106109d1576101008083540402835291602001916109fc565b820191906000526020600020905b8154815290600101906020018083116109df57829003601f168201915b50505050509150808054600181600116156101000203166002900480601f016020809104026020016040519081016040528092919081815260200182805460018160011615610100020316600290048015610a985780601f10610a6d57610100808354040283529160200191610a98565b820191906000526020600020905b815481529060010190602001808311610a7b57829003601f168201915b50505050509050955095509550955050509193509193565b600080600080600080610ac161065b565b95503494508560ff1685811515610ad457fe5b049350600092505b6001860360ff168360ff161015610b7f57600154600160a060020a031663c66198dc8460405160e060020a63ffffffff841602815260ff9091166004820152602401602060405180830381600087803b1515610b3757600080fd5b5af11515610b4457600080fd5b5050506040518051600160a060020a03811660009081526002602052604090208054870190559585900395600194909401939250610adc9050565b600154600160a060020a031663c66198dc600019880160405160e060020a63ffffffff841602815260ff9091166004820152602401602060405180830381600087803b1515610bcd57600080fd5b5af11515610bda57600080fd5b5050506040518051600160a060020a031660009081526002602052604090208054909601909555505050505050565b610c1581600301610ed1565b6000828152600660205260408120805473ffffffffffffffffffffffffffffffffffffffff1916815590610c4c600183018261109b565b610c5a60028301600061109b565b6000600383018181556004840182905560058401805460ff19908116909155600785018054909116905590610c9260088501826110df565b50505050610725600783610f22565b6001546000908190819081908190600160a060020a0316636452e8216040518163ffffffff1660e060020a028152600401602060405180830381600087803b1515610ceb57600080fd5b5af11515610cf857600080fd5b505050604051805160028b015490955060ff1615159050610d1b57838955610d2d565b88548414610d2d57610d2d8985610fab565b600189015460ff891660020a9350831615610d4b5760019450610e3d565b600086815260038a016020526040902080546001808c0180548717905560028c01805460ff8181168401811660ff199283161790925584549382168301918216931683179093559193501415610dbf5760058901805460018101610daf8382611065565b5060009182526020909120018690555b600489015460ff90811690831610610dff5760048901805460ff191660ff848116919091179091556000198301811690881611610dff5760009450610e3d565b600289015460ff16610e0f61065b565b60048b0154919003915060001960ff91821683010181169088161115610e385760029450610e3d565b600194505b50505050949350505050565b60015460009081908190600160a060020a0316636452e8216040518163ffffffff1660e060020a028152600401602060405180830381600087803b1515610e8f57600080fd5b5af11515610e9c57600080fd5b5050506040518051865490935083149050610eba5760019250610827565b5050506001919091015460ff90911660020a161590565b60005b6005820154811015610725578160030160008360050183815481101515610ef757fe5b600091825260208083209091015483528201929092526040019020805460ff19169055600101610ed4565b60005b8254811015610fa65782548290849083908110610f3e57fe5b6000918252602090912001541415610f9e57825483906000198101908110610f6257fe5b9060005260206000209001548382815481101515610f7c57fe5b600091825260209091200155825460001901610f988482611065565b50610fa6565b600101610f25565b505050565b610fb482610ed1565b80825560006001830181905560028301805460ff199081169091556004840180549091169055610fa66005840182611065565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106110285782800160ff19823516178555611055565b82800160010185558215611055579182015b8281111561105557823582559160200191906001019061103a565b506110619291506110f9565b5090565b815481835581811511610fa657600083815260209020610fa69181019083016110f9565b60206040519081016040526000815290565b50805460018160011615610100020316600290046000825580601f106110c157506108a7565b601f0160209004906000526020600020908101906108a791906110f9565b50805460008255906000526020600020908101906108a791905b6106b691905b8082111561106157600081556001016110ff5600a165627a7a72305820af29c0599153be7dbfca41d09a79a323da1a2a2e6d264323ff44bc76366764c50029
```

## SecretStoreDocumentKeyShadowRetrievalService

### Deployments

| Chain | Address                                    | Owner                                                   | Registry name          | Key server set                          |
|-------|--------------------------------------------|---------------------------------------------------------|------------------------|-----------------------------------------|
| Kovan | [0x754480DBa46Ca190d0403C0A10864CC2e6093A29](https://kovan.etherscan.io/address/0x754480DBa46Ca190d0403C0A10864CC2e6093A29) | [0x00884912dA44286aFA12bf0E7ba26BB95DEb3CA6](https://kovan.etherscan.io/address/0x00884912dA44286aFA12bf0E7ba26BB95DEb3CA6) ([svyatonik](https://github.com/svyatonik))      | secretstore_service_doc_sretr | [0x5694a840B7c8E24a28A350242C335252283f3D25](https://kovan.etherscan.io/address/0x5694a840B7c8E24a28A350242C335252283f3D25)

### ABI

```json
[{"constant":false,"inputs":[{"name":"newLimit","type":"uint256"}],"name":"setMaxDocumentKeyShadowRetrievalRequests","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_new","type":"address"}],"name":"setOwner","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"serverKeyId","type":"bytes32"},{"name":"requesterPublic","type":"bytes"}],"name":"retrieveDocumentKeyShadow","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"constant":true,"inputs":[],"name":"documentKeyShadowRetrievalFee","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"keyServer","type":"address"}],"name":"requireKeyServer","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"newFee","type":"uint256"}],"name":"setDocumentKeyShadowRetrievalFee","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"maxDocumentKeyShadowRetrievalRequests","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"keyServersCount","outputs":[{"name":"","type":"uint8"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"serverKeyId","type":"bytes32"},{"name":"requester","type":"address"},{"name":"keyServer","type":"address"}],"name":"isDocumentKeyShadowRetrievalResponseRequired","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"serverKeyId","type":"bytes32"},{"name":"requester","type":"address"},{"name":"commonPoint","type":"bytes"},{"name":"threshold","type":"uint8"}],"name":"documentKeyCommonRetrieved","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"owner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"drain","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"serverKeyId","type":"bytes32"},{"name":"requester","type":"address"},{"name":"participants","type":"uint256"},{"name":"decryptedSecret","type":"bytes"},{"name":"shadow","type":"bytes"}],"name":"documentKeyPersonalRetrieved","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"serverKeyId","type":"bytes32"},{"name":"requester","type":"address"}],"name":"deleteDocumentKeyShadowRetrievalRequest","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"serverKeyId","type":"bytes32"},{"name":"requester","type":"address"}],"name":"documentKeyShadowRetrievalError","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"documentKeyShadowRetrievalRequestsCount","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"index","type":"uint256"}],"name":"getDocumentKeyShadowRetrievalRequest","outputs":[{"name":"","type":"bytes32"},{"name":"","type":"bytes"},{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[{"name":"keyServerSetAddressInit","type":"address"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"payable":true,"stateMutability":"payable","type":"fallback"},{"anonymous":false,"inputs":[{"indexed":false,"name":"serverKeyId","type":"bytes32"},{"indexed":false,"name":"requester","type":"address"}],"name":"DocumentKeyCommonRetrievalRequested","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"name":"serverKeyId","type":"bytes32"},{"indexed":false,"name":"requesterPublic","type":"bytes"}],"name":"DocumentKeyPersonalRetrievalRequested","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"serverKeyId","type":"bytes32"},{"indexed":true,"name":"requester","type":"address"},{"indexed":false,"name":"commonPoint","type":"bytes"},{"indexed":false,"name":"threshold","type":"uint8"}],"name":"DocumentKeyCommonRetrieved","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"serverKeyId","type":"bytes32"},{"indexed":true,"name":"requester","type":"address"},{"indexed":false,"name":"decryptedSecret","type":"bytes"},{"indexed":false,"name":"shadow","type":"bytes"}],"name":"DocumentKeyPersonalRetrieved","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"serverKeyId","type":"bytes32"},{"indexed":true,"name":"requester","type":"address"}],"name":"DocumentKeyShadowRetrievalError","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"old","type":"address"},{"indexed":true,"name":"current","type":"address"}],"name":"NewOwner","type":"event"}]
```

### Bytecode

Compiler: `0.4.21+commit.dfe3193c.Emscripten.clang`

Enable optimization: `true`

```json
0x606060405260008054600160a060020a03191633600160a060020a0316179055341561002a57600080fd5b60405160208061186a8339810160405280805160018054600160a060020a031916600160a060020a039290921691909117905550506702c68af0bb14000060049081556005556117eb8061007f6000396000f3006060604052600436106100d75763ffffffff60e060020a60003504166309b203e881146100dc57806313af4035146100f4578063153f333b146101135780631b1e67aa1461012a5780632b4f030a1461014f5780633931a7561461018457806347f9af491461019a5780635aa8404c146101ad57806377dc782b146101c05780637b97eecc146101fc5780638da5cb5b146102315780639890220b14610260578063b9b36c4214610273578063d3cb594f146102b2578063e2f1d4f9146102d4578063e3c20cf2146102f6578063f3d3317114610309575b600080fd5b34156100e757600080fd5b6100f26004356103a6565b005b34156100ff57600080fd5b6100f2600160a060020a03600435166103c6565b6100f260048035906024803590810191013561044c565b341561013557600080fd5b61013d61064d565b60405190815260200160405180910390f35b341561015a57600080fd5b61016e600160a060020a0360043516610653565b60405160ff909116815260200160405180910390f35b341561018f57600080fd5b6100f26004356106c2565b34156101a557600080fd5b61013d6106e2565b34156101b857600080fd5b61016e6106e8565b34156101cb57600080fd5b6101e8600435600160a060020a0360243581169060443516610746565b604051901515815260200160405180910390f35b341561020757600080fd5b6100f2600480359060248035600160a060020a03169160443591820191013560643560ff166107c1565b341561023c57600080fd5b610244610a98565b604051600160a060020a03909116815260200160405180910390f35b341561026b57600080fd5b6100f2610aa7565b341561027e57600080fd5b6100f2600480359060248035600160a060020a03169160443591606435808201929081013591608435908101910135610b13565b34156102bd57600080fd5b6100f2600435600160a060020a0360243516610d56565b34156102df57600080fd5b6100f2600435600160a060020a0360243516610ded565b341561030157600080fd5b61013d610fb6565b341561031457600080fd5b61031f600435610fbc565b604051838152811515604082015260606020820181815290820184818151815260200191508051906020019080838360005b83811015610369578082015183820152602001610351565b50505050905090810190601f1680156103965780820380516001836020036101000a031916815260200191505b5094505050505060405180910390f35b60005433600160a060020a039081169116146103c157600080fd5b600555565b60005433600160a060020a039081169116146103e157600080fd5b600054600160a060020a0380831691167f70aea8d848e8a90fb7661b227dc522eb6395c3dac71b63cb59edd5c9899b236460405160405180910390a36000805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b60008060045480341015151561046157600080fd5b84848080601f016020809104026020016040519081016040528181529291906020840183838082843750859450505050505160401461049f57600080fd5b85858080601f016020809104026020016040519081016040528181529291906020840183838082843782019150505050505033600160a060020a0316816040518082805190602001908083835b6020831061050b5780518252601f1990920191602091820191016104ec565b6001836020036101000a0380198251168184511617909252505050919091019250604091505051908190039020600160a060020a03161461054b57600080fd5b6005546007541061055b57600080fd5b8733604051918252600160a060020a03166c010000000000000000000000000260208201526034016040519081900390206000818152600660205260409020600180820154929750909550600261010091831615919091026000190190911604156105c557600080fd5b6105cd6110cb565b8784556105de600185018888611673565b5060078054600181016105f183826116f1565b5060009182526020909120018590557fcce4f642c73cab3eae4e6ef3d59cc746b5e7d035447b1c226b5aafb4c09157098833604051918252600160a060020a031660208201526040908101905180910390a15050505050505050565b60045481565b600154600090600160a060020a031663287fb40c8360405160e060020a63ffffffff8416028152600160a060020a039091166004820152602401602060405180830381600087803b15156106a657600080fd5b5af115156106b357600080fd5b50505060405180519392505050565b60005433600160a060020a039081169116146106dd57600080fd5b600455565b60055481565b600154600090600160a060020a0316635560c9656040518163ffffffff1660e060020a028152600401602060405180830381600087803b151561072a57600080fd5b5af1151561073757600080fd5b50505060405180519150505b90565b60008060008061075585610653565b92508686604051918252600160a060020a03166c0100000000000000000000000002602082015260340160405190819003902060008181526006602052604090206008810154919350915060ff16806107b657506107b68160020184611224565b979650505050505050565b600080600080600087878080601f016020809104026020016040519081016040528181529291906020840183838082843750859450505050505160401461080757600080fd5b8a8a604051918252600160a060020a03166c010000000000000000000000000260208201526034016040519081900390206000818152600660205260409020600180820154929850909650600261010091831615919091026000190190911604151561087257610a8b565b61087b33610653565b93508888886040518084848082843782019150508260ff1660ff167f01000000000000000000000000000000000000000000000000000000000000000281526001019350505050604051809103902092506108f1856002018560026108de6106e8565b60ff168115156108ea57fe5b04866112b1565b9150600182600281111561090157fe5b141561090c57610a8b565b600282600281111561091a57fe5b14156109545761092a8686611459565b600160a060020a038a168b6000805160206117a083398151915260405160405180910390a3610a8b565b600885018054600160ff199091161761ff00191661010060ff8a1602179055600160a060020a038a168b7f72e320c3dc51ffa2396051490d47becef092ea73f671957a2dafda7e567aff518b8b8b60405160ff82166020820152604080825281018390528060608101858580828437820191505094505050505060405180910390a37f1b73b7e683137318af868187d364e5f3d25de1c54913fb552bfbca47d44f33218b8660010160405182815260406020820181815283546002610100600183161502600019019091160491830182905290606083019084908015610a7b5780601f10610a5057610100808354040283529160200191610a7b565b820191906000526020600020905b815481529060010190602001808311610a5e57829003601f168201915b5050935050505060405180910390a15b5050505050505050505050565b600054600160a060020a031681565b600160a060020a033316600090815260026020526040902054801515610acc57600080fd5b600160a060020a0333166000818152600260205260408082209190915582156108fc0290839051600060405180830381858888f193505050501515610b1057600080fd5b50565b60008060008060008089898080601f0160208091040260200160405190810160405281815292919060208401838380828437508594505050505051604014610b5a57600080fd5b8d8d604051918252600160a060020a03166c0100000000000000000000000002602082015260340160405190819003902060008181526006602052604090206001808201549299509097506002610100918316159190910260001901909116041515610bc557610d46565b600886015460ff161515610bd857600080fd5b610be133610653565b945060ff851660020a93508b84161515610bfa57600080fd5b8b8b8b60405180848152602001838380828437820191505093505050506040519081900390206000818152600c880160205260409020805491945092501515610c6857600b8601805460018101610c5183826116f1565b5060009182526020909120018390558b8255610c79565b6001820154841615610c7957600080fd5b60028201805460ff198116600160ff9283168101909216179091558201805485179055600160a060020a038d168e7f04ad358f86bfdff4535760571ca0e7940d88e47306f2df3fc9ed9247039ecda78d8d8d8d60405160408082528101849052806020810160608201878780828437909101848103835285815260200190508585808284378201915050965050505050505060405180910390a360028201546008870154610100900460ff908116600019928216929092011614610d3c57610d46565b610d468787611459565b5050505050505050505050505050565b60008054819033600160a060020a03908116911614610d7457600080fd5b8383604051918252600160a060020a03166c0100000000000000000000000002602082015260340160405190819003902060008181526006602052604090209092509050610dc28282611459565b600160a060020a038316846000805160206117a083398151915260405160405180910390a350505050565b6000806000806000808787604051918252600160a060020a03166c0100000000000000000000000002602082015260340160405190819003902060008181526006602052604090206001808201549298509096506002610100918316159190910260001901909116041515610e6157610fac565b610e6a33610653565b600886015490945060ff161515610ee4576000196001029250610e95856002018560026108de6106e8565b91506001826002811115610ea557fe5b1415610eb057610fac565b610eba8686611459565b600160a060020a038716886000805160206117a083398151915260405160405180910390a3610fac565b50600984015460ff841660020a90811615610efe57610fac565b60098501805482179055600a8501805460ff19811660ff918216600101821617918290556008870154918116600019018116610100909204161180610f725750600a850154600160ff909116118015610f725750600a850154600886015460011960ff928316018216610100909104909116115b15610f7c57610fac565b610f868686611459565b600160a060020a038716886000805160206117a083398151915260405160405180910390a35b5050505050505050565b60075490565b6000610fc6611715565b6000806000600786815481101515610fda57fe5b906000526020600020900154915060066000836000191660001916815260200190815260200160002090508060000154816001018260080160009054906101000a900460ff16818054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156110b55780601f1061108a576101008083540402835291602001916110b5565b820191906000526020600020905b81548152906001019060200180831161109857829003601f168201915b5050505050915094509450945050509193909250565b6000806000806000806110dc6106e8565b95503494508560ff16858115156110ef57fe5b049350600092505b6001860360ff168360ff16101561119a57600154600160a060020a031663c66198dc8460405160e060020a63ffffffff841602815260ff9091166004820152602401602060405180830381600087803b151561115257600080fd5b5af1151561115f57600080fd5b5050506040518051600160a060020a038116600090815260026020526040902080548701905595859003956001949094019392506110f79050565b600154600160a060020a031663c66198dc600019880160405160e060020a63ffffffff841602815260ff9091166004820152602401602060405180830381600087803b15156111e857600080fd5b5af115156111f557600080fd5b5050506040518051600160a060020a031660009081526002602052604090208054909601909555505050505050565b60015460009081908190600160a060020a0316636452e8216040518163ffffffff1660e060020a028152600401602060405180830381600087803b151561126a57600080fd5b5af1151561127757600080fd5b505050604051805186549093508314905061129557600192506112a9565b50600184015460ff841660020a9081161592505b505092915050565b6001546000908190819081908190600160a060020a0316636452e8216040518163ffffffff1660e060020a028152600401602060405180830381600087803b15156112fb57600080fd5b5af1151561130857600080fd5b505050604051805160028b015490955060ff161515905061132b5783895561133d565b8854841461133d5761133d898561155e565b600189015460ff891660020a935083161561135b576001945061144d565b600086815260038a016020526040902080546001808c0180548717905560028c01805460ff8181168401811660ff1992831617909255845493821683019182169316831790935591935014156113cf57600589018054600181016113bf83826116f1565b5060009182526020909120018690555b600489015460ff9081169083161061140f5760048901805460ff191660ff84811691909117909155600019830181169088161161140f576000945061144d565b600289015460ff1661141f6106e8565b60048b0154919003915060001960ff91821683010181169088161115611448576002945061144d565b600194505b50505050949350505050565b60005b600b8201548110156114b75781600c01600083600b018381548110151561147f57fe5b600091825260208083209091015483528201929092526040018120818155600180820192909255600201805460ff191690550161145c565b6114c38260020161159a565b6000838152600660205260408120818155906114e26001830182611727565b6000600283018181556003840182905560048401805460ff1990811690915560068501805490911690559061151a600785018261176b565b505060088201805461ffff19169055600060098301819055600a8301805460ff1916905561154c90600b84019061176b565b50506115596007846115ef565b505050565b6115678261159a565b80825560006001830181905560028301805460ff19908116909155600484018054909116905561155960058401826116f1565b60005b60058201548110156115eb5781600301600083600501838154811015156115c057fe5b600091825260208083209091015483528201929092526040019020805460ff1916905560010161159d565b5050565b60005b8254811015611559578254829084908390811061160b57fe5b600091825260209091200154141561166b5782548390600019810190811061162f57fe5b906000526020600020900154838281548110151561164957fe5b60009182526020909120015582546000190161166584826116f1565b50611559565b6001016115f2565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106116b45782800160ff198235161785556116e1565b828001600101855582156116e1579182015b828111156116e15782358255916020019190600101906116c6565b506116ed929150611785565b5090565b81548183558181151161155957600083815260209020611559918101908301611785565b60206040519081016040526000815290565b50805460018160011615610100020316600290046000825580601f1061174d5750610b10565b601f016020900490600052602060002090810190610b109190611785565b5080546000825590600052602060002090810190610b1091905b61074391905b808211156116ed576000815560010161178b56000fdd54511745997b3c6f05f62e17c608b6d402b5d02dfa60009997c1ae89edc2a165627a7a723058207d148c67c31cbc53439088661cc2f90d9d1d1895053da5cce19e4a964c2a3c6c0029
```